!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-svg"),require("uuid")):"function"==typeof define&&define.amd?define(["exports","react","react-svg","uuid"],t):t((e=e||self)["react-smart-tabs"]={},e.React,e.ReactSVG,e.uuid)}(this,function(e,t,n,r){"use strict";var i="default"in t?t.default:t;n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;function a(e,t,n){return e.splice(n,0,e.splice(t,1)[0]),e}e.Tab=e=>i.createElement("div",{className:"tab-wrapper"},i.createElement("div",null,e.children)),e.TabBar=e=>{const[l,s]=t.useState(""),[o,c]=t.useState(null),u=t.useRef(null),d=t.useRef(null),p=t.useRef(0),f=t.useRef(0),[g,m]=t.useState(null),[h,b]=t.useState([]),y=t.useRef(i.Children.toArray(e.children).map(()=>t.createRef()));function x(e){return y.current.find(t=>t.current.id===e.id)}function C(e){if(!g)return;const t=x(g).current,n=t.nextSibling,r=t.previousSibling;n&&(n.style.marginLeft="0",n.style.marginRight="-1px"),r&&(r.style.marginLeft="0",r.style.marginRight="-1px"),t.style.position="relative",t.style.left="auto",u.current.onmouseup=null,m(null)}t.useEffect(()=>{const t=i.Children.toArray(e.children).map((e,t)=>({tabComponent:e,id:r(),arrayIndex:t}));b(t)},[]),t.useEffect(()=>{e.onTabsChange&&e.onTabsChange(h,e.children)},[h]),t.useEffect(()=>{const n=i.Children.toArray(e.children),a=n[n.length-1];if(!(0===h.length&&n.length>1)){if(n.length>h.length&&n.length>0){h.find(e=>e.tabComponent.props===a.props);const e={tabComponent:a,id:r(),arrayIndex:n.length-1};b([...h,e]),v(e),y.current.push(t.createRef())}if(n.length<h.length){const e=n.map((e,t)=>({tabComponent:e,id:r(),arrayIndex:t}));b(e)}if(n.length===h.length){if(g)return;const e=h.map(e=>{const t=n.find((t,n)=>n===e.arrayIndex);return Object.assign({},e,{tabComponent:t})});b([...e])}}},[e.children]);const v=e=>{s(e.id),c(e)},R=t=>{if(e.inactive)return!1;const n=i.Children.toArray(e.children).find(e=>e.props.active),r=n&&n.props===t.tabComponent.props?n:null;return t.id===l||!(""!==l||!r)||!r&&""===l&&!n&&i.Children.toArray(e.children)[0].props===t.tabComponent.props&&(v(h[0]),!0)};return i.createElement(t.Fragment,null,i.createElement("div",{className:`bar__wrapper ${e.className}`},i.createElement("ul",{className:"tab__bar",onMouseMove:function(e){if(!g)return;const t=function(e){return p.current=f.current-e.clientX,f.current=e.clientX,x(g).current.offsetLeft-p.current}(e),n=x(g).current,r=n.nextSibling,i=n.previousSibling,l=n.getBoundingClientRect().width-1;n.style.left=`${t}px`,n.style.position="absolute",r&&r.getBoundingClientRect().left-70<t&&(i&&(i.style.marginRight="-1px",i.style.marginLeft="0"),r.style.marginLeft="0px",r.style.marginRight=`${l-1}px`,r.className="animated",a(h,h.indexOf(g),h.indexOf(g)+1),b([...h])),i&&i.getBoundingClientRect().right-80>t&&(r&&(r.style.marginRight="-1px",r.style.marginLeft="0"),i.style.marginRight="-1px",i.style.marginLeft=`${l}px`,i.className="deanimated",a(h,h.indexOf(g),h.indexOf(g)-1),b([...h]))},onMouseLeave:C,ref:u},h.length>0&&!e.hiddenTabs&&h.map((t,r)=>{const a=t.tabComponent.props.className,l=t.tabComponent.props.classNameActive,o=t.tabComponent.props.closeable,{closeable:c}=e,u=void 0!==o?o&&c:c;return i.createElement("li",{id:t.id,key:t.id,ref:y.current[r],className:R(t)?`${l||"active"} reposition`:a,onMouseDown:n=>(function(t,n){if("close"===t.target.className)return;e.onTabClick&&e.onTabClick(n);const r=x(n).current;if(v(n),!e.reorderable)return;m(n),f.current=t.clientX,r.style.left=`${r.getBoundingClientRect().left}px`,r.style.position="absolute",r.style.width=`${r.offsetWidth}px`;const i=r.nextSibling,a=r.previousSibling;i&&a?i.style.marginLeft=`${r.getBoundingClientRect().width-1}px`:a?a.style.marginRight=`${r.getBoundingClientRect().width-2}px`:i.style.marginLeft=`${r.getBoundingClientRect().width-1}px`})(n,t),onMouseUp:C},t.tabComponent.props.tabHeader||t.tabComponent.props.text,u&&i.createElement("span",{ref:d,className:"close",onClick:n=>((t,n,r)=>{if(R(r)&&h.length>1){const t=h[h.indexOf(r)+1],n=h[h.indexOf(r)-1];t?e.onTabClose&&e.onTabClose(r,t):e.onTabClose&&e.onTabClose(r,n)}s("")})(t.id,0,t)},e.closeIcon||i.createElement(n,{className:"close-icon",src:'<svg width="64" version="1.1" xmlns="http://www.w3.org/2000/svg" height="64" viewBox="0 0 64 64" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 64 64">\n  <g>\n    <path fill="#1D1D1B" d="M28.941,31.786L0.613,60.114c-0.787,0.787-0.787,2.062,0,2.849c0.393,0.394,0.909,0.59,1.424,0.59   c0.516,0,1.031-0.196,1.424-0.59l28.541-28.541l28.541,28.541c0.394,0.394,0.909,0.59,1.424,0.59c0.515,0,1.031-0.196,1.424-0.59   c0.787-0.787,0.787-2.062,0-2.849L35.064,31.786L63.41,3.438c0.787-0.787,0.787-2.062,0-2.849c-0.787-0.786-2.062-0.786-2.848,0   L32.003,29.15L3.441,0.59c-0.787-0.786-2.061-0.786-2.848,0c-0.787,0.787-0.787,2.062,0,2.849L28.941,31.786z"/>\n  </g>\n</svg>'.toString()})))})),e.newTab&&i.createElement("span",{className:"addButton",onClick:n=>(n=>{e.newTab(),y.current.push(t.createRef())})()},"+")),h.length>0&&h.map(t=>i.createElement("div",{id:`${t.id}-panel`,key:`${t.id}-panel`,className:`tab-panel ${R(t)&&!e.hiddenPanel?"active":""}`},t.tabComponent)))},Object.defineProperty(e,"__esModule",{value:!0})});
