!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("react-svg"),require("uuid")):"function"==typeof define&&define.amd?define(["exports","react","react-svg","uuid"],n):n((e=e||self)["react-smart-tabs"]={},e.React,e.ReactSVG,e.uuid)}(this,function(e,n,t,r){"use strict";var i="default"in n?n.default:n;t=t&&t.hasOwnProperty("default")?t.default:t,r=r&&r.hasOwnProperty("default")?r.default:r;function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(t.push(o.value),!n||t.length!==n);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(e){return console.log("tabPanel render"),i.createElement("div",null,e.children)};function u(e,n,t){return e.splice(t,0,e.splice(n,1)[0]),e}e.Tab=function(e){return i.createElement("div",{className:"tab-wrapper"},i.createElement("div",null,e.children))},e.TabBar=function(e){var s=o(n.useState(""),2),f=s[0],p=s[1],d=o(n.useState(null),2),g=(d[0],d[1]),m=n.useRef(null),b=n.useRef(null),h=n.useRef(0),y=n.useRef(0),v=o(n.useState(null),2),x=v[0],C=v[1],w=o(n.useState([]),2),O=w[0],R=w[1],E=o(n.useState(null),2),S=(E[0],E[1]),T=n.useRef(i.Children.toArray(e.children).map(function(){return n.createRef()}));function L(e){return T.current.find(function(n){return n.current.id===e.id})}function N(e){if(x){var n=L(x).current,t=n.nextSibling,r=n.previousSibling;t&&(t.style.marginLeft="0",t.style.marginRight="-1px"),r&&(r.style.marginLeft="0",r.style.marginRight="-1px"),n.style.position="relative",n.style.left="auto",m.current.onmouseup=null,C(null)}}n.useEffect(function(){var n=i.Children.toArray(e.children).map(function(e,n){return{tabComponent:e,id:r(),arrayIndex:n}});R(n)},[]),n.useEffect(function(){e.onTabsChange&&e.onTabsChange(O,e.children)},[O]),n.useEffect(function(){var t=i.Children.toArray(e.children),o=t[t.length-1];if(!(0===O.length&&t.length>1)){if(t.length>O.length&&t.length>0){O.find(function(e){return e.tabComponent.props===o.props});var c={tabComponent:o,id:r(),arrayIndex:t.length-1};R([].concat(l(O),[c])),A(c),T.current.push(n.createRef())}if(t.length<O.length){var u=t.map(function(e,n){return{tabComponent:e,id:r(),arrayIndex:n}});R(l(u))}if(t.length===O.length){var s=t.find(function(e){return!0===e.props.active});if(x)return;s&&A(s);var f=O.map(function(e){var n=t.find(function(n,t){return t===e.arrayIndex});return function(e){for(var n=1;n<arguments.length;n++)if(n%2){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){a(e,n,t[n])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[n]));return e}({},e,{tabComponent:n})});R(l(f))}}},[e.children]);var A=function(e){p(e.id),g(e)},j=function(n){if(e.inactive)return!1;var t=i.Children.toArray(e.children).find(function(e){return e.props.active}),r=t&&t.props===n.tabComponent.props?t:null;return!!r||n.id===f||!r&&""===f&&!t&&i.Children.toArray(e.children)[0].props===n.tabComponent.props&&(A(O[0]),!0)};return i.createElement("div",{className:e.className},!e.hiddenTabs&&i.createElement("div",{className:"bar__wrapper"},i.createElement("ul",{className:"tab__bar",onMouseMove:function(e){if(x){var n=function(e){return h.current=y.current-e.clientX,y.current=e.clientX,L(x).current.offsetLeft-h.current}(e),t=L(x).current,r=t.nextSibling,i=t.previousSibling,a=t.getBoundingClientRect().width-1;t.style.left="".concat(n,"px"),t.style.position="absolute",r&&r.getBoundingClientRect().left-70<n&&(i&&(i.style.marginRight="-1px",i.style.marginLeft="0"),r.style.marginLeft="0px",r.style.marginRight="".concat(a-1,"px"),r.className="animated",u(O,O.indexOf(x),O.indexOf(x)+1),R(l(O))),i&&i.getBoundingClientRect().right-80>n&&(r&&(r.style.marginRight="-1px",r.style.marginLeft="0"),i.style.marginRight="-1px",i.style.marginLeft="".concat(a,"px"),i.className="deanimated",u(O,O.indexOf(x),O.indexOf(x)-1),R(l(O)))}},onMouseLeave:N,ref:m},O.length>0&&O.map(function(n,r){var a=n.tabComponent.props.className,o=n.tabComponent.props.classNameActive,l=n.tabComponent.props.closeable,c=e.closeable,u=void 0!==l?l&&c:c;return i.createElement("li",{id:n.id,key:n.id,ref:T.current[r],className:j(n)?"".concat(o||"active"," reposition"):a,onMouseDown:function(t){return function(n,t){if("close"!==n.target.className){e.onTabClick&&e.onTabClick(t);var r=L(t).current;if(A(t),!t.tabComponent.props.blocked&&e.reorderable){C(t),y.current=n.clientX,r.style.left="".concat(r.getBoundingClientRect().left,"px"),r.style.position="absolute",r.style.width="".concat(r.offsetWidth,"px");var i=r.nextSibling,a=r.previousSibling;i&&a?i.style.marginLeft="".concat(r.getBoundingClientRect().width-1,"px"):a?a.style.marginRight="".concat(r.getBoundingClientRect().width-2,"px"):i.style.marginLeft="".concat(r.getBoundingClientRect().width-1,"px")}}}(t,n)},onMouseUp:N},n.tabComponent.props.tabHeader||n.tabComponent.props.text,u&&i.createElement("span",{ref:b,className:"close",onClick:function(t){return function(n,t,r){if(j(r)&&O.length>1){var i=O[O.indexOf(r)+1],a=O[O.indexOf(r)-1];i?(e.onTabClose&&e.onTabClose(r,i),S(O.indexOf(r))):(e.onTabClose&&e.onTabClose(r,a),S(O.indexOf(r)))}else e.onTabClose(r,null);p("")}(n.id,0,n)}},e.closeIcon||i.createElement(t,{className:"close-icon",src:'<svg width="64" version="1.1" xmlns="http://www.w3.org/2000/svg" height="64" viewBox="0 0 64 64" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 64 64">\n  <g>\n    <path fill="#1D1D1B" d="M28.941,31.786L0.613,60.114c-0.787,0.787-0.787,2.062,0,2.849c0.393,0.394,0.909,0.59,1.424,0.59   c0.516,0,1.031-0.196,1.424-0.59l28.541-28.541l28.541,28.541c0.394,0.394,0.909,0.59,1.424,0.59c0.515,0,1.031-0.196,1.424-0.59   c0.787-0.787,0.787-2.062,0-2.849L35.064,31.786L63.41,3.438c0.787-0.787,0.787-2.062,0-2.849c-0.787-0.786-2.062-0.786-2.848,0   L32.003,29.15L3.441,0.59c-0.787-0.786-2.061-0.786-2.848,0c-0.787,0.787-0.787,2.062,0,2.849L28.941,31.786z"/>\n  </g>\n</svg>'.toString()})))})),e.newTab&&i.createElement("span",{className:"addButton",onClick:function(t){return e.newTab(),void T.current.push(n.createRef())}},"+")),O.length>0&&O.map(function(n){return i.createElement("div",{id:"".concat(n.id,"-panel"),key:"".concat(n.id,"-panel"),className:"tab-panel ".concat(j(n)&&!e.hiddenPanel?"active":"")},i.createElement(c,null,n.tabComponent))}))},e.TabPanel=c,Object.defineProperty(e,"__esModule",{value:!0})});
