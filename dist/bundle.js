!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-svg"),require("uuid")):"function"==typeof define&&define.amd?define(["exports","react","react-svg","uuid"],t):t((e=e||self)["react-smart-tabs"]={},e.React,e.ReactSVG,e.uuid)}(this,function(e,t,n,r){"use strict";var i="default"in t?t.default:t;n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(e){return i.createElement("div",null,e.children)};function u(e,t,n){return e.splice(n,0,e.splice(t,1)[0]),e}e.Tab=function(e){return i.createElement("div",{className:"tab-wrapper"},i.createElement("div",null,e.children))},e.TabBar=function(e){var s=a(t.useState(""),2),f=s[0],d=s[1],p=a(t.useState(null),2),g=(p[0],p[1]),b=t.useRef(null),h=t.useRef(null),m=t.useRef(0),y=t.useRef(0),v=a(t.useState(null),2),w=v[0],x=v[1],C=a(t.useState([]),2),R=C[0],O=C[1],E=a(t.useState(!1),2),S=E[0],T=E[1],L=t.useRef(i.Children.toArray(e.children).map(function(){return t.createRef()}));function N(e){return L.current.find(function(t){return t.current.id===e.id})}function A(e){if(w){var t=N(w).current,n=t.nextSibling,r=t.previousSibling;n&&(n.style.marginLeft="0",n.style.marginRight="-1px"),r&&(r.style.marginLeft="0",r.style.marginRight="-1px"),t.style.position="relative",t.style.left="auto",b.current.onmouseup=null,x(null)}}t.useEffect(function(){var t=i.Children.toArray(e.children).map(function(e,t){return{tabComponent:e,id:r(),arrayIndex:t}});O(t)},[]),t.useEffect(function(){e.onTabsChange&&e.onTabsChange(R,e.children)},[R]),t.useEffect(function(){var n=i.Children.toArray(e.children),a=n[n.length-1];if(!(0===R.length&&n.length>1)){if(n.length>R.length&&n.length>0){R.find(function(e){return e.tabComponent.props===a.props}),console.log("===== the last ",a);var c={tabComponent:a,id:r(),arrayIndex:n.length-1};O([].concat(l(R),[c])),j(c),L.current.push(t.createRef())}if(n.length===R.length){var u=n.find(function(e){return!0===e.props.active});if(S)return;if(w)return;u&&j(u);var s=R.map(function(e){var t=n.find(function(t,n){return n===e.arrayIndex});return function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},e,{tabComponent:t})});O(l(s))}}},[e.children]);var j=function(e){d(e.id),g(e)},k=function(t){if(e.inactive)return!1;var n=i.Children.toArray(e.children).find(function(e){return e.props.active}),r=n&&n.props===t.tabComponent.props?n:null;return!!r||t.id===f||!r&&""===f&&!n&&i.Children.toArray(e.children)[0].props===t.tabComponent.props&&(j(R[0]),!0)};return i.createElement("div",{className:e.className},!e.hiddenTabs&&i.createElement("div",{className:"bar__wrapper"},i.createElement("ul",{className:"tab__bar",onMouseMove:function(e){if(w){var t=function(e){return m.current=y.current-e.clientX,y.current=e.clientX,N(w).current.offsetLeft-m.current}(e),n=N(w).current,r=n.nextSibling,i=n.previousSibling,o=n.getBoundingClientRect().width-1;n.style.left="".concat(t,"px"),n.style.position="absolute",r&&r.getBoundingClientRect().left-70<t&&(i&&(i.style.marginRight="-1px",i.style.marginLeft="0"),r.style.marginLeft="0px",r.style.marginRight="".concat(o-1,"px"),r.className="animated",u(R,R.indexOf(w),R.indexOf(w)+1),O(l(R))),i&&i.getBoundingClientRect().right-80>t&&(r&&(r.style.marginRight="-1px",r.style.marginLeft="0"),i.style.marginRight="-1px",i.style.marginLeft="".concat(o,"px"),i.className="deanimated",u(R,R.indexOf(w),R.indexOf(w)-1),O(l(R)))}},onMouseLeave:A,ref:b},R.length>0&&R.map(function(t,r){console.log("=== the tab to be rendered above",t);var o=t.tabComponent.props.className,a=t.tabComponent.props.classNameActive,l=t.tabComponent.props.closeable,c=e.closeable,u=void 0!==l?l&&c:c;return i.createElement("li",{id:t.id,key:t.id,ref:L.current[r],className:k(t)?"".concat(a||"active"," reposition"):o,onMouseDown:function(n){return function(t,n){if("close"!==t.target.className){e.onTabClick&&e.onTabClick(n);var r=N(n).current;if(j(n),!n.tabComponent.props.blocked&&e.reorderable){x(n),y.current=t.clientX,r.style.left="".concat(r.getBoundingClientRect().left,"px"),r.style.position="absolute",r.style.width="".concat(r.offsetWidth,"px");var i=r.nextSibling,o=r.previousSibling;i&&o?i.style.marginLeft="".concat(r.getBoundingClientRect().width-1,"px"):o?o.style.marginRight="".concat(r.getBoundingClientRect().width-2,"px"):i.style.marginLeft="".concat(r.getBoundingClientRect().width-1,"px")}}}(n,t)},onMouseUp:A},t.tabComponent.props.tabHeader||t.tabComponent.props.text,u&&i.createElement("span",{ref:h,className:"close",onClick:function(n){return function(t,n,r){if(k(r)&&R.length>1){var i=R[R.indexOf(r)+1],o=R[R.indexOf(r)-1];i?(console.log("=== the tab when has one in the back",r),e.onTabClose&&e.onTabClose(r,i),O(R.filter(function(e){return e.id!==r.id}))):(console.log("=== the tab when has one in the front",r),e.onTabClose&&e.onTabClose(r,o),O(R.filter(function(e){return e.id!==r.id})))}else console.log("=== the tab when there is no other",r),e.onTabClose(r,null),O(R.filter(function(e){return e.id!==r.id}));T(!0)}(t.id,0,t)}},e.closeIcon||i.createElement(n,{className:"close-icon",src:'<svg width="64" version="1.1" xmlns="http://www.w3.org/2000/svg" height="64" viewBox="0 0 64 64" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 64 64">\n  <g>\n    <path fill="#1D1D1B" d="M28.941,31.786L0.613,60.114c-0.787,0.787-0.787,2.062,0,2.849c0.393,0.394,0.909,0.59,1.424,0.59   c0.516,0,1.031-0.196,1.424-0.59l28.541-28.541l28.541,28.541c0.394,0.394,0.909,0.59,1.424,0.59c0.515,0,1.031-0.196,1.424-0.59   c0.787-0.787,0.787-2.062,0-2.849L35.064,31.786L63.41,3.438c0.787-0.787,0.787-2.062,0-2.849c-0.787-0.786-2.062-0.786-2.848,0   L32.003,29.15L3.441,0.59c-0.787-0.786-2.061-0.786-2.848,0c-0.787,0.787-0.787,2.062,0,2.849L28.941,31.786z"/>\n  </g>\n</svg>'.toString()})))})),e.newTab&&i.createElement("span",{className:"addButton",onClick:function(n){return e.newTab(),void L.current.push(t.createRef())}},"+")),R.length>0&&R.map(function(t){return console.log("=== the tab to be rendered",t),i.createElement("div",{id:"".concat(t.id,"-panel"),key:"".concat(t.id,"-panel"),className:"tab-panel ".concat(k(t)&&!e.hiddenPanel?"active":"")},i.createElement(c,null,t.tabComponent))}))},e.TabPanel=c,Object.defineProperty(e,"__esModule",{value:!0})});
