!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("react-svg"),require("uuid")):"function"==typeof define&&define.amd?define(["exports","react","react-svg","uuid"],n):n((e=e||self)["react-smart-tabs"]={},e.React,e.ReactSVG,e.uuid)}(this,function(e,n,t,r){"use strict";var a="default"in n?n.default:n;t=t&&t.hasOwnProperty("default")?t.default:t,r=r&&r.hasOwnProperty("default")?r.default:r;function i(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(t.push(o.value),!n||t.length!==n);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=function(e){return console.log("tabPanel render"),a.createElement("div",null,e.children)};function c(e,n,t){return e.splice(t,0,e.splice(n,1)[0]),e}e.Tab=function(e){return a.createElement("div",{className:"tab-wrapper"},a.createElement("div",null,e.children))},e.TabBar=function(e){var u=i(n.useState(""),2),s=u[0],f=u[1],d=i(n.useState(null),2),p=(d[0],d[1]),g=n.useRef(null),m=n.useRef(null),h=n.useRef(0),b=n.useRef(0),y=i(n.useState(null),2),v=y[0],C=y[1],x=i(n.useState([]),2),w=x[0],R=x[1],E=n.useRef(a.Children.toArray(e.children).map(function(){return n.createRef()}));function T(e){return E.current.find(function(n){return n.current.id===e.id})}function L(e){if(v){var n=T(v).current,t=n.nextSibling,r=n.previousSibling;t&&(t.style.marginLeft="0",t.style.marginRight="-1px"),r&&(r.style.marginLeft="0",r.style.marginRight="-1px"),n.style.position="relative",n.style.left="auto",g.current.onmouseup=null,C(null)}}n.useEffect(function(){var n=a.Children.toArray(e.children).map(function(e,n){return{tabComponent:e,id:r(),arrayIndex:n}});R(n)},[]),n.useEffect(function(){e.onTabsChange&&e.onTabsChange(w,e.children)},[w]),n.useEffect(function(){var t=a.Children.toArray(e.children),i=t[t.length-1];if(!(0===w.length&&t.length>1)){if(t.length>w.length&&t.length>0){w.find(function(e){return e.tabComponent.props===i.props});var l={tabComponent:i,id:r(),arrayIndex:t.length-1};R([].concat(o(w),[l])),N(l),E.current.push(n.createRef())}if(t.length<w.length){var c=t.map(function(e,n){return{tabComponent:e,id:r(),arrayIndex:n}});R(c)}if(t.length===w.length){var u=t.find(function(e){return!0===e.props.active});if(v)return;u&&N(u);var s=a.Children.toArray(e.children).map(function(e,n){return{tabComponent:e,id:r(),arrayIndex:n}});R(o(s))}}},[e.children]);var N=function(e){f(e.id),p(e)},S=function(n){if(e.inactive)return!1;var t=a.Children.toArray(e.children).find(function(e){return e.props.active}),r=t&&t.props===n.tabComponent.props?t:null;return!!r||n.id===s||!r&&""===s&&!t&&a.Children.toArray(e.children)[0].props===n.tabComponent.props&&(N(w[0]),!0)};return a.createElement("div",{className:e.className},!e.hiddenTabs&&a.createElement("div",{className:"bar__wrapper"},a.createElement("ul",{className:"tab__bar",onMouseMove:function(e){if(v){var n=function(e){return h.current=b.current-e.clientX,b.current=e.clientX,T(v).current.offsetLeft-h.current}(e),t=T(v).current,r=t.nextSibling,a=t.previousSibling,i=t.getBoundingClientRect().width-1;t.style.left="".concat(n,"px"),t.style.position="absolute",r&&r.getBoundingClientRect().left-70<n&&(a&&(a.style.marginRight="-1px",a.style.marginLeft="0"),r.style.marginLeft="0px",r.style.marginRight="".concat(i-1,"px"),r.className="animated",c(w,w.indexOf(v),w.indexOf(v)+1),R(o(w))),a&&a.getBoundingClientRect().right-80>n&&(r&&(r.style.marginRight="-1px",r.style.marginLeft="0"),a.style.marginRight="-1px",a.style.marginLeft="".concat(i,"px"),a.className="deanimated",c(w,w.indexOf(v),w.indexOf(v)-1),R(o(w)))}},onMouseLeave:L,ref:g},w.length>0&&w.map(function(n,r){var i=n.tabComponent.props.className,o=n.tabComponent.props.classNameActive,l=n.tabComponent.props.closeable,c=e.closeable,u=void 0!==l?l&&c:c;return a.createElement("li",{id:n.id,key:n.id,ref:E.current[r],className:S(n)?"".concat(o||"active"," reposition"):i,onMouseDown:function(t){return function(n,t){if("close"!==n.target.className){e.onTabClick&&e.onTabClick(t);var r=T(t).current;if(N(t),!t.tabComponent.props.blocked&&e.reorderable){C(t),b.current=n.clientX,r.style.left="".concat(r.getBoundingClientRect().left,"px"),r.style.position="absolute",r.style.width="".concat(r.offsetWidth,"px");var a=r.nextSibling,i=r.previousSibling;a&&i?a.style.marginLeft="".concat(r.getBoundingClientRect().width-1,"px"):i?i.style.marginRight="".concat(r.getBoundingClientRect().width-2,"px"):a.style.marginLeft="".concat(r.getBoundingClientRect().width-1,"px")}}}(t,n)},onMouseUp:L},n.tabComponent.props.tabHeader||n.tabComponent.props.text,u&&a.createElement("span",{ref:m,className:"close",onClick:function(t){return function(n,t,r){if(S(r)&&w.length>1){var a=w[w.indexOf(r)+1],i=w[w.indexOf(r)-1];a?e.onTabClose&&e.onTabClose(r,a):e.onTabClose&&e.onTabClose(r,i)}else e.onTabClose(r,null);f("")}(n.id,0,n)}},e.closeIcon||a.createElement(t,{className:"close-icon",src:'<svg width="64" version="1.1" xmlns="http://www.w3.org/2000/svg" height="64" viewBox="0 0 64 64" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 64 64">\n  <g>\n    <path fill="#1D1D1B" d="M28.941,31.786L0.613,60.114c-0.787,0.787-0.787,2.062,0,2.849c0.393,0.394,0.909,0.59,1.424,0.59   c0.516,0,1.031-0.196,1.424-0.59l28.541-28.541l28.541,28.541c0.394,0.394,0.909,0.59,1.424,0.59c0.515,0,1.031-0.196,1.424-0.59   c0.787-0.787,0.787-2.062,0-2.849L35.064,31.786L63.41,3.438c0.787-0.787,0.787-2.062,0-2.849c-0.787-0.786-2.062-0.786-2.848,0   L32.003,29.15L3.441,0.59c-0.787-0.786-2.061-0.786-2.848,0c-0.787,0.787-0.787,2.062,0,2.849L28.941,31.786z"/>\n  </g>\n</svg>'.toString()})))})),e.newTab&&a.createElement("span",{className:"addButton",onClick:function(t){return e.newTab(),void E.current.push(n.createRef())}},"+")),w.length>0&&w.map(function(n){return a.createElement("div",{id:"".concat(n.id,"-panel"),key:"".concat(n.id,"-panel"),className:"tab-panel ".concat(S(n)&&!e.hiddenPanel?"active":"")},a.createElement(l,null,n.tabComponent))}))},e.TabPanel=l,Object.defineProperty(e,"__esModule",{value:!0})});
